<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="前言 网上可能已经有很多搭建NextCloud的教程了，今天这篇教程是我在搭建NextCloud过程中的一些心得，供大家参考一下。 在这个网盘到"><title>快速搭建NextCloud服务端及利用Aria2离线下载</title><link rel=canonical href=https://www.ratodo.com/article/nextcloud-build/><link rel=stylesheet href=/scss/style.min.68574f8a12f183a03834a859f3ba8041fd36cf832a0f69e19b7f2b1ffc91609a.css><meta property="og:title" content="快速搭建NextCloud服务端及利用Aria2离线下载"><meta property="og:description" content="前言 网上可能已经有很多搭建NextCloud的教程了，今天这篇教程是我在搭建NextCloud过程中的一些心得，供大家参考一下。 在这个网盘到"><meta property="og:url" content="https://www.ratodo.com/article/nextcloud-build/"><meta property="og:site_name" content="Ratodo's Blog"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:published_time" content="2019-08-12T20:18:00+08:00"><meta property="article:modified_time" content="2019-08-12T20:18:00+08:00"><meta property="og:image" content="https://u.ratodo.com/blog/2019/nextcloud-build-0.jpg!full"><meta name=twitter:title content="快速搭建NextCloud服务端及利用Aria2离线下载"><meta name=twitter:description content="前言 网上可能已经有很多搭建NextCloud的教程了，今天这篇教程是我在搭建NextCloud过程中的一些心得，供大家参考一下。 在这个网盘到"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://u.ratodo.com/blog/2019/nextcloud-build-0.jpg!full"><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu79b33ed3f78c7e192ae49e277ec0a349_43447_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>🤯</span></figure><div class=site-meta><h1 class=site-name><a href=/>Ratodo's Blog</a></h1><h2 class=site-description>My yard is full of shards.</h2></div></header><ol class=social-menu><li><a href=https://www.foreverblog.cn/go.html target=_blank title=ForeverBlog rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-planet" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18.816 13.58c2.292 2.138 3.546 4 3.092 4.9-.745 1.46-5.783-.259-11.255-3.838-5.47-3.579-9.304-7.664-8.56-9.123.464-.91 2.926-.444 5.803.805"/><circle cx="12" cy="12" r="7"/></svg></a></li><li><a href=https://github.com/ratodo target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://s.19991222.xyz target=_blank title=ShrotUrl rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-unlink" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/><line x1="16" y1="21" x2="16" y2="19"/><line x1="19" y1="16" x2="21" y2="16"/><line x1="3" y1="8" x2="5" y2="8"/><line x1="8" y1="3" x2="8" y2="5"/></svg></a></li><li><a href=https://stat.ratodo.com target=_blank title=Status rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chart-line" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="19" x2="20" y2="19"/><polyline points="4 15 8 9 12 11 16 6 20 10"/></svg></a></li><li><a href=https://telegram.com/ratodo target=_blank title=Telegram rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-telegram" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 10l-4 4 6 6 4-16-18 7 4 2 2 6 3-4"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>主页</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>关于</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>搜索</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>文章归档</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>友情链接</span></a></li><div class=menu-bottom-section><li id=i18n-switch><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><select name=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://www.ratodo.com/ selected>中文</option><option value=https://www.ratodo.com/en/>English</option></select></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#前言>前言</a></li><li><a href=#安装过程>安装过程</a></li><li><a href=#启用https站点>启用HTTPS站点</a></li><li><a href=#使用aria2进行离线下载>使用Aria2进行离线下载</a></li><li><a href=#总结>总结</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/article/nextcloud-build/><img src=https://u.ratodo.com/blog/2019/nextcloud-build-0.jpg!full loading=lazy alt="Featured image of post 快速搭建NextCloud服务端及利用Aria2离线下载"></a></div><div class=article-details><header class=article-category><a href=/categories/%E5%BB%BA%E7%AB%99%E7%AC%94%E8%AE%B0/ style=background-color:#f68c60;color:#fff>建站笔记</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/article/nextcloud-build/>快速搭建NextCloud服务端及利用Aria2离线下载</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Aug 12, 2019</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>阅读时长: 4 分钟</time></div></footer></div></header><section class=article-content><h2 id=前言>前言</h2><p>网上可能已经有很多搭建NextCloud的教程了，今天这篇教程是我在搭建NextCloud过程中的一些心得，供大家参考一下。</p><p>在这个网盘到处飞的时代，拥有自己的一个私人网盘还是有很大作用的，起码数据算是掌握在自己手中（其实也是在服务商处。</p><p>NextCloud由于其出色的跨平台协作能力以及简洁易操作的界面博得了好多人的喜爱，今天介绍一下通过snap的安装方法。</p><p>P.S.本篇文章所使用的服务器为日本的LightSail，操作系统为Ubuntu18.04。</p><h2 id=安装过程>安装过程</h2><p>首先登陆上自己的服务器，获取root权限（有些不必）</p><p><code>sudo -i</code></p><p>然后输入以下命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install
</span></span><span class=line><span class=cl>snap sudo apt-get install snapd
</span></span><span class=line><span class=cl>sudo snap install nextcloud
</span></span></code></pre></td></tr></table></div></div><p>直接复制粘贴可能会导致最后一行代码未被执行，建议查看后确定是否需要重新执行。</p><p>稍等片刻后出现如下字样即为安装成功。</p><p><img src=https://u.ratodo.com/blog/2019/nextcloud-build-1.jpg!full loading=lazy alt=Pic1></p><p>这个时候就可以在浏览器里输入你服务器的ip地址进行设置了。</p><p><img src=https://u.ratodo.com/blog/2019/nextcloud-build-2.jpg!full loading=lazy alt=Pic2></p><p>至此就算是安装好了，是不是很简单哈哈哈哈哈。</p><h2 id=启用https站点>启用HTTPS站点</h2><p>刚刚只是安装好了NextCloud服务端，现在要进行域名的设置。</p><p>首先要提前将要绑定的域名解析到你服务器的ip地址，最好等到确定解析成功了再进行接下来的步骤。</p><p>输入以下代码执行申请Let&rsquo;s Encrypt的证书：</p><p><code>sudo nextcloud.enable-https lets-encrypt</code></p><p><img src=https://u.ratodo.com/blog/2019/nextcloud-build-3.jpg!full loading=lazy alt=Pic3></p><p>（在这一步的时候我出现了问题，在部署完证书之后我无法访问我的域名和ip地址，这个问题在我卸载重装之后等到了解决。P.S.卸载命令：snap remove nextcloud  重装后需重新执行申请证书命令）</p><p>此时通过域名访问会出现来自不受信任的域，如下图所示：</p><p><img src=https://u.ratodo.com/blog/2019/nextcloud-build-4.jpg!full loading=lazy alt=Pic4></p><p>这时候只需要输入下面的命令即可（将domain.com换成自己的域名，如需再加就将1改为2，以此类推）</p><p><code>sudo nextcloud.occ config:system:set trusted_domains 1 --value=domain.com</code></p><p>这样就可以正常访问了，到这个时候，你的nextcloud已经可以正常使用了。</p><h2 id=使用aria2进行离线下载>使用Aria2进行离线下载</h2><p>如果能用服务器来离线下载的话就好多了，视频什么的都还可以在线看，但是不要违反服务器所在国家的相关法规，反正可能会被关闭服务器。</p><p>首先要带年纪右上角头像选择应用，再点击已禁用的应用，将External storage support启用。</p><p>回到服务器上执行安装Aria2：</p><p><code>wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/aria2.sh &amp;amp;&amp;amp; chmod +x aria2.sh &amp;amp;&amp;amp; bash aria2.sh</code></p><p><img src=https://u.ratodo.com/blog/2019/nextcloud-build-5.jpg!full loading=lazy alt=Pic5></p><p>接下来修改Aria2的下载存储路径，打开：vi /root/.aria2/aria2.conf，找到：dir=XXX，建议修改为 /var/snap/nextcloud/common/nextcloud/data/xxx/files/Downloads（其中xxx是你在安装时候的用户名）</p><p><img src=https://u.ratodo.com/blog/2019/nextcloud-build-6.jpg!full loading=lazy alt=Pic6></p><p>同时也建议将rpc令牌改为自己好记的字符串。</p><p><img src=https://u.ratodo.com/blog/2019/nextcloud-build-7.jpg!full loading=lazy alt=Pic7></p><p>修改完毕后运行<code>service aria2 restart</code>重启一下aria2服务。</p><p>现在我们前往nextcloud的设置界面，点击管理下方的外部存储，添加刚刚的本地的外部存储。</p><p><img src=https://u.ratodo.com/blog/2019/nextcloud-build-8.jpg!full loading=lazy alt=Pic8></p><p>这样就可以了，接下来下载一个aria2可视化程序。（以下内容引用自<a class=link href=https://wzfou.com/nextcloud-aria2/ target=_blank rel=noopener>挖站否</a>）</p><p><strong>引用开始</strong></p><p>AriaNg项目：</p><pre><code>项目：https://github.com/mayswind/AriaNg
下载：https://github.com/mayswind/AriaNg/releases/latest
</code></pre><p>AriaNg是一个前端(HTML+JS静态)控制面板，不需要和 Aria2(后端/服务端)放在一个服务器或者设备中，你可以直接下载到你的本地电脑上解压打开index.html，或者放在服务器访问，服务器只要有Nginx或者Apache就可以了。</p><p>点击打开AriaNg 设置 填入RPC别名、地址、协议、请求方法和密钥。RPC地址填写IP或者域名，端口默认的是6800，密钥的话就是你刚刚在配置文件中修改过的。（点击放大）</p><p><img src=https://wzfou.com/wp-content/uploads/2017/08/Aria2-nextcloud_05.gif loading=lazy alt=Pic9></p><p>设置完成后，点击Aria2 状态你可以看到Aria2已经连接成功了。没有连接成功的话，检查一下VPS的防火墙有没有开放两个端口，一个是RPC监听端口<code> 6800(默认)</code>，一个是BT监听端口<code> 51413(默认)</code>。当然修改了配置文件后记得重启VPS。</p><p><img src=https://wzfou.com/wp-content/uploads/2017/08/Aria2-nextcloud_05_1.gif loading=lazy alt=Pic9></p><p>打开AriaNg面板，你就可以添加httpBT磁力链接开始下载了。</p><p><img src=https://wzfou.com/wp-content/uploads/2017/08/Aria2-nextcloud_07.gif loading=lazy alt=Pic9></p><p>由于我们用的是VPS主机下载资源，所以速度基本上可以飞起来了。</p><p><img src=https://wzfou.com/wp-content/uploads/2017/08/Aria2-nextcloud_08.gif loading=lazy alt=Pic9></p><p><strong>引用结束</strong></p><p><strong>！！记得确认下载位置是不是之前设置的位置！！</strong></p><p>到这里之后还有一个问题，就是我们下载的文件可能不会在nextcloud中显示，这个时候就要使用nextcloud自带的occ功能来刷新文件夹中的文件了。</p><p>首先在root目录下创建一个可执行文件</p><p><code>vi /root/nextcloud.sh</code></p><p>在里面输入</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>sudo nextcloud.occ files:scan --all
</span></span></code></pre></td></tr></table></div></div><p>之后保存退出</p><p>对其赋予权限，<code>chmod 777 nextcloud.sh</code></p><p>运行<code>crontab -e</code>回车</p><p>在下面添加一段代码：</p><p><code>*/1 * * * * /root/nextcloud.sh</code></p><p>按Ctrl+X退出，Y确定回车即可。上述命令代表每分钟执行一次nextcloud.sh，你也可以改成2分钟30分钟都可以，看你需要。</p><p>所有的下载任务都可以在Aria2可视化界面之中进行，很方便。</p><h2 id=总结>总结</h2><p>建议不要在日本的服务器上BT下载，很容易挂掉~</p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/article/hugo-first-article/><div class=article-image><img src=https://u.ratodo.com/blog/2022/first-article-0.jpg!full loading=lazy data-key=hugo-first-article data-hash=https://u.ratodo.com/blog/2022/first-article-0.jpg!full></div><div class=article-details><h2 class=article-title>博客架构变更</h2></div></a></article><article class=has-image><a href=/article/scf-tcshare/><div class=article-image><img src=https://u.ratodo.com/blog/2020/scf-tcshare-0.jpg!full loading=lazy data-key=scf-tcshare data-hash=https://u.ratodo.com/blog/2020/scf-tcshare-0.jpg!full></div><div class=article-details><h2 class=article-title>使用腾讯云函数SCF搭建TCShare</h2></div></a></article><article class=has-image><a href=/article/zeit-deploy/><div class=article-image><img src=https://u.ratodo.com/blog/2020/zeit-deploy-0.jpg!full loading=lazy data-key=zeit-deploy data-hash=https://u.ratodo.com/blog/2020/zeit-deploy-0.jpg!full></div><div class=article-details><h2 class=article-title>使用ZEIT部署源码（Github等）</h2></div></a></article><article class=has-image><a href=/article/pjax-prism-solution/><div class=article-image><img src=https://u.ratodo.com/blog/2020/pjax-prism-solution-0.jpg!full loading=lazy data-key=pjax-prism-solution data-hash=https://u.ratodo.com/blog/2020/pjax-prism-solution-0.jpg!full></div><div class=article-details><h2 class=article-title>PJAX局部刷新导致Prism代码高亮失效的解决方案</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=ratodo/Ratodo-Comments data-repo-id=R_kgDOHqxbVw data-category=General data-category-id=DIC_kwDOHqxbV84CQQYY data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en crossorigin=anonymous async></script>
<script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark")}})()</script><footer class=site-footer><section class=copyright>&copy;
2018 -
2022 Ratodo's Blog</section><section class=powerby><a href=https://beian.miit.gov.cn/ target=_blank>苏ICP备18060628号</a>&nbsp;|&nbsp;<a href="https://icp.gov.moe/?keyword=20221222" target=_blank>萌ICP备20221222号</a><div><span>本网站由&nbsp;</span><a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target=_blank rel=nofollow><img src=https://u.ratodo.com/blog/src/upyun-1.png style=height:.9em vertical-align=middle alt=又拍云联盟 title=又拍云联盟><img src=https://u.ratodo.com/blog/src/upyun-2.png style=height:.9em vertical-align=middle alt=又拍云联盟 title=又拍云联盟></a><span>&nbsp;提供CDN加速/云存储服务</span><br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo&nbsp;&nbsp;</a>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.16.0>Stack</a></b> Designed By <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>